{"version":3,"file":"plugin.js","sources":["../../src/book/plugin.js"],"sourcesContent":["function findAlertSetting(input, key, fallback, callback) {\n  const match = (input || '').match(new RegExp(`${key}:(([^\\\\r\\\\n|]*))`));\n  if (!match) {\n    return callback ? callback(fallback) : fallback;\n  }\n\n  return callback ? callback(match[1]) : match[1];\n}\n\nrequire(['gitbook', 'jQuery'], function (gitbook, $) {\n  gitbook.events.bind('page.change', function () {\n    const options = gitbook.state.config.pluginsConfig['simple-alerts'];\n\n    $('blockquote').each(function () {\n      const origin = $(this).html();\n      const content = origin.replace(/\\[!(\\w*)((?:\\|\\w*:.*)*?)\\]([\\s\\S]*)/g, (match, key, settings, value) => {\n        const config = options[key.toLowerCase()];\n\n        if (!config) {\n          return match;\n        }\n\n        // Style configuration\n        const style = findAlertSetting(settings, 'style', options.style);\n        let isIconVisible = findAlertSetting(settings, 'iconVisibility', config.iconVisibility);\n        let isLabelVisible = findAlertSetting(settings, 'labelVisibility', config.labelVisibility);\n        let label = findAlertSetting(settings, 'label', config.label);\n        const icon = findAlertSetting(settings, 'icon', config.icon);\n        const className = findAlertSetting(settings, 'className', config.className);\n\n        // Label can be language specific and could be specified via user configuration\n        if (typeof label === 'object') {\n          const language = gitbook.state.innerLanguage;\n\n          if (language && label.hasOwnProperty(language)) {\n            label = label[language];\n          } else {\n            isLabelVisible = false;\n            isIconVisible = false;\n          }\n        }\n\n        const iconTag = `<i class=\"${icon}\"></i>`;\n\n        return (\n          `<div class=\"alert ${style} ${className}\">\n              <p class=\"title\">\n                  ${isIconVisible ? iconTag : ''}\n                  ${isLabelVisible ? label : ''}\n              </p>\n              <p>${value}\n            </div>`\n        );\n      });\n\n      // Do not change blockquotes without alert indicator.\n      if (content !== origin) {\n        $(this).replaceWith(content);\n      }\n    });\n  });\n});\n"],"names":["findAlertSetting","input","key","fallback","callback","match","RegExp","require","gitbook","$","events","bind","options","state","config","pluginsConfig","each","origin","this","html","content","replace","settings","value","toLowerCase","style","isIconVisible","iconVisibility","isLabelVisible","labelVisibility","label","icon","className","_typeof","language","innerLanguage","hasOwnProperty","iconTag","replaceWith"],"mappings":";;;;;;;8PAAA,SAASA,iBAAiBC,EAAOC,EAAKC,EAAUC,OACxCC,GAASJ,GAAS,IAAII,MAAM,IAAIC,iBAAUJ,+BAC3CG,EAIED,EAAWA,EAASC,EAAM,IAAMA,EAAM,GAHpCD,EAAWA,EAASD,GAAYA,EAM3CI,QAAQ,CAAC,UAAW,UAAW,SAAUC,EAASC,GAChDD,EAAQE,OAAOC,KAAK,cAAe,eAC3BC,EAAUJ,EAAQK,MAAMC,OAAOC,cAAc,iBAEnDN,EAAE,cAAcO,KAAK,eACbC,EAASR,EAAES,MAAMC,OACjBC,EAAUH,EAAOI,QAAQ,uCAAwC,SAAChB,EAAOH,EAAKoB,EAAUC,OACtFT,EAASF,EAAQV,EAAIsB,mBAEtBV,SACIT,MAIHoB,EAAQzB,iBAAiBsB,EAAU,QAASV,EAAQa,OACtDC,EAAgB1B,iBAAiBsB,EAAU,iBAAkBR,EAAOa,gBACpEC,EAAiB5B,iBAAiBsB,EAAU,kBAAmBR,EAAOe,iBACtEC,EAAQ9B,iBAAiBsB,EAAU,QAASR,EAAOgB,OACjDC,EAAO/B,iBAAiBsB,EAAU,OAAQR,EAAOiB,MACjDC,EAAYhC,iBAAiBsB,EAAU,YAAaR,EAAOkB,cAG5C,WAAjBC,QAAOH,GAAoB,KACvBI,EAAW1B,EAAQK,MAAMsB,cAE3BD,GAAYJ,EAAMM,eAAeF,GACnCJ,EAAQA,EAAMI,GAGdR,EADAE,GAAiB,MAKfS,sBAAuBN,8CAGNN,cAASO,oEAEpBN,EAAgBW,EAAU,kCAC1BT,EAAiBE,EAAQ,qDAE1BP,4BAMTH,IAAYH,GACdR,EAAES,MAAMoB,YAAYlB"}